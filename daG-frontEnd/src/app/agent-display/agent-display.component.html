
<h1>Informations sur les Agents</h1>
<input type="text" class="form-control" placeholder="Filtre de Recherche ...." [(ngModel)]="searchTerm" (keyup)="applyFilter()">
<br>

<div class="presentation">
    Bienvenue sur la page de détails sur les agents. Ici, vous trouverez des informations complètes et à jour sur chacun de nos agents, y compris leurs coordonnées, rôles, départements et les procédures qui leur sont assignées. 
    Cette page vous permet de gérer efficacement les ressources humaines et de suivre les activités de chaque agent.
</div>

<div *ngIf="selectedAgent" class="agent-details">
    <div class="title">
        <h2>Informations sur l'agent</h2>
    </div>
    
    <div class="row" style="margin-top: 5%; width: 90%; margin-left: 5%;">
        <div class="col-md-6">
            <p><strong>Nom:</strong> {{ selectedAgent.name }}</p>
            <p><strong> Email : </strong> {{ selectedAgent.email }}</p>
            <p><strong> Date d'embauche : </strong> {{ selectedAgent.dateEmbauche | date }}</p>
        </div>
        <div class="col-md-6" >
            <p><strong> Prénom : </strong> {{ selectedAgent.firstName }}</p>
            <p><strong> Téléphone : </strong> {{ selectedAgent.phoneNumber }}</p>
            <p><strong> Département : </strong> {{ selectedAgent.departement }}</p>
        </div>
    </div>

    <br><br>

    <h4>Procedures Assignées</h4>
    <br>
    <ul>
        <li *ngFor="let procedure of selectedAgent.proceduresAssignees" >
            <br>
            <p><strong>Identifiant procédure :</strong> {{procedure.code}}</p>
            <p><strong>Type : </strong>{{ procedure.type }}</p>
            <p><strong>Date Demande : </strong>{{ procedure.dateDemande | date }}</p>
            <p><strong>Description :</strong> {{procedure.description}}</p>
            <p><strong>Status : </strong>{{ procedure.status }}</p>
            <p><strong>Documents Scannés : </strong>{{ procedure.documentsScannes.join(', ') }}</p>
            <br>
            <!-- Affichage des informations du demandeur (utilisateur) -->
            <!--<p>Demandeur:</p>
            <ul> 
                <li>
                    <p><strong>Nom:</strong> {{ procedure.demandeur.name }}</p>
                    <p><strong>Prénom:</strong> {{ procedure.demandeur.firstName }}</p>
                    <p><strong>Email:</strong> {{ procedure.demandeur.email }}</p>
                    <p><strong>Téléphone:</strong> {{ procedure.demandeur.phoneNumber }}</p>
                    <p><strong>Date de naissance:</strong> {{ procedure.demandeur.birthDate | date }}</p>
                    <p><strong>Genre:</strong> {{ procedure.demandeur.gender }}</p>
                </li>
            </ul>-->
        </li>
    </ul>
    <br><br>
    <button class="btn btn-outline-danger" style="width:19.5%; margin-left: 80%;margin-right: 0.5%; font-size: 20px;" (click)="onBack()">Masquer</button>
</div>



<table style="border: 25px solid white; ">
    <thead class="firstLine">
        <td>Id</td>
        <td>Nom</td>
        <td>Prénom</td>
        <td>Adresse mail</td>
        <td>departement</td>
        <td></td>
    </thead>
    <tr *ngFor="let ag of agent$ | async "  >
        <td>{{ag.id}}</td>
        <td>{{ag.name}}</td>
        <td>{{ag.firstName}}</td>
        <td>{{ag.email}}</td>
        <td>{{ag.departement}}</td>
        <td><button style=" display: block; margin: 0 auto;text-align: center; font-size: 20px;" class="btn btn-outline-primary" (click)="onViewAgent(ag)">Consulter</button></td>
    </tr>
</table>


<br><br>
